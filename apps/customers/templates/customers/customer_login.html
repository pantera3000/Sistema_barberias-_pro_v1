{% extends 'base_customer.html' %}
<!-- Nota: Si no existe base_customer.html usaremos base.html filtrando el menú o crearemos una simplificada -->

{% block title %}{{ title }}{% endblock %}

{% block content %}
<style>
    .login-container {
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .login-card {
        background: #ffffff;
        border-radius: 30px;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 450px;
        overflow: hidden;
        border: none;
    }
    .login-header {
        background: linear-gradient(135deg, {{ organization.primary_color|default:"#0d6efd" }} 0%, #1c1c1c 100%);
        padding: 40px 30px;
        text-align: center;
        color: white;
    }
    .login-body {
        padding: 40px 30px;
    }
    .form-control-lg {
        border-radius: 15px;
        border: 2px solid #e2e8f0;
        font-weight: 600;
        padding: 15px;
    }
    .form-control-lg:focus {
        border-color: {{ organization.primary_color|default:"#0d6efd" }};
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.1);
    }
    .btn-login {
        border-radius: 15px;
        padding: 15px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: {{ organization.primary_color|default:"#0d6efd" }};
        border: none;
        transition: all 0.3s ease;
    }
    .btn-login:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        opacity: 0.9;
    }
</style>

<div class="login-container">
    <div class="login-card">
        <div class="login-header">
            {% if organization.logo %}
                <img src="{{ organization.logo.url }}" alt="Logo" class="mb-3" style="height: 60px; border-radius: 15px; background: white; padding: 10px;">
            {% else %}
                <div class="rounded-circle bg-white bg-opacity-20 d-inline-flex p-3 mb-3">
                    <i class="fas fa-user-check fa-2x"></i>
                </div>
            {% endif %}
            <h3 class="fw-bold mb-1">{{ organization.name }}</h3>
            <p class="small opacity-75 mb-0">Acceso Exclusivo para Clientes</p>
        </div>
        <div class="login-body">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show rounded-4 small mb-4" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post">
                {% csrf_token %}
                <div class="mb-3">
                    <label class="form-label small fw-bold text-muted text-uppercase">Número de Teléfono</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light border-0 rounded-start-4 px-3">
                            <i class="fas fa-phone text-muted"></i>
                        </span>
                        <input type="tel" name="phone" id="phone" class="form-control form-control-lg border-start-0 rounded-end-4" 
                               placeholder="Ej: 956xxx" required>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="form-label small fw-bold text-muted text-uppercase">DNI / Documento Identidad</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light border-0 rounded-start-4 px-3">
                            <i class="fas fa-id-card text-muted"></i>
                        </span>
                        <input type="text" name="dni" id="dni" class="form-control form-control-lg border-start-0 rounded-end-4" 
                               placeholder="Tu DNI registrado" required>
                    </div>
                    <div class="form-text mt-2 small">
                        <i class="fas fa-info-circle me-1"></i> Si no tienes registrado tu DNI, solicítalo en tu próxima visita.
                    </div>
                </div>
                <button type="submit" class="btn btn-primary w-100 btn-login shadow-sm">
                    Ingresar a mi Perfil
                </button>
            </form>
            
            <div class="text-center mt-4">
                <a href="{% url 'stamps:public_lookup' organization.slug %}" class="text-decoration-none small text-muted">
                    <i class="fas fa-search me-1"></i> Solo quiero ver mis sellos
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
